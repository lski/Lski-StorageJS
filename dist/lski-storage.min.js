!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.lski=e.lski||{},e.lski.storage={}))}(this,function(e){"use strict";let t=0;const n=e=>e||`_stored_idx${++t}`,o=e=>(t="")=>{const o=n(t),s=()=>{const e=r();return null===e?null:e.value},r=()=>{const t=e.getItem(o);if(null===t)return null;const n=JSON.parse(t);return null===n.expiresAt||n.expiresAt>Date.now()?n:(e.removeItem(o),null)};return{data:r,get:s,set:(t,n)=>{const s={value:t,expiresAt:void 0===n?null:"number"==typeof n?n:n.getTime()};return e.setItem(o,JSON.stringify(s)),t},clear:()=>{e.removeItem(o)},has:()=>!!s()}},s=o(localStorage);const r=(e,t)=>null==e?";":encodeURIComponent(JSON.stringify(e)+";"+t||""),u=e=>{const t=e.lastIndexOf(";"),n=e.substring(0,t),o=e.substring(t+1);if(0===n.length)return null;const s=JSON.parse(n),r=parseInt(o,10);return{value:s,expiresAt:isNaN(r)?null:r}},i=o(sessionStorage);e.local=s,e.cookie=function(e="",t={path:"/",domain:location.hostname}){const o=encodeURIComponent(n(e)),s=()=>{const e=document.cookie.match(`(^|;) ?${o}=([^;]*)(;|$)`);if(!e)return null;const t=decodeURIComponent(e[2]);return u(t)};return{data:s,get:()=>{const e=s();return null===e?null:e.value},set:(e,n)=>{const s=[`${o}=${r(e,n)}`];if(t.path&&s.push("path="+t.path),t.domain&&s.push("domain="+t.domain),void 0!==n){const e="number"==typeof n?new Date(n):n;s.push("expires="+e.toUTCString())}return document.cookie=s.join(";"),e},clear:()=>{document.cookie=o+"="},has:()=>!!s()}},e.session=i,Object.defineProperty(e,"__esModule",{value:!0})});
